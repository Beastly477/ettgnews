{{ define "main" }}
<h1>{{ .Title }}</h1>

<ul class="grid gap-4">
  {{ $state := .Params.state }}
  {{ if $state }} <!-- Check if $state is not nil -->
    {{ $data := index .Site.Data $state "counties" }}
    {{ if $data }} <!-- Check if $data is not nil -->
      {{ range $slug, $info := $data }}
        <li class="p-4 bg-white rounded shadow">
          <a href="/states/{{ $state }}/counties/{{ $slug }}/">
            {{ $info.label }}
          </a>
        </li>
      {{ end }}
    {{ else }}
      <p>No county data available for this state.</p>
    {{ end }}
  {{ else }}
    <p>No state data available.</p>
  {{ end }}
</ul>
{{ end }}